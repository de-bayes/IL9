<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- Primary Meta Tags -->
    <title>IL9Cast - Illinois 9th District Democratic Primary 2026 Forecast</title>
    <meta name="title" content="IL9Cast - Illinois 9th District Democratic Primary 2026 Forecast">
    <meta name="description" content="Live prediction market aggregation for Illinois 9th District Democratic Primary election on March 17, 2026. Real-time odds from Manifold Markets and Kalshi, updated every 3 minutes.">
    <meta name="keywords" content="IL9Cast, Illinois 9th District, Democratic Primary, primary election 2026, prediction markets, Manifold Markets, Kalshi, election forecast, Daniel Biss, Jan Schakowsky">
    <link rel="canonical" href="https://il9.org/">

    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://il9.org/">
    <meta property="og:title" content="IL9Cast - Illinois 9th District Democratic Primary 2026 Forecast">
    <meta property="og:description" content="Live prediction market aggregation for Illinois 9th District Democratic Primary. Real-time odds updated every 3 minutes from Manifold Markets and Kalshi.">
    <meta property="og:site_name" content="IL9Cast">

    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image">
    <meta property="twitter:url" content="https://il9.org/">
    <meta property="twitter:title" content="IL9Cast - Illinois 9th District Democratic Primary 2026 Forecast">
    <meta property="twitter:description" content="Live prediction market aggregation for Illinois 9th District Democratic Primary. Real-time odds updated every 3 minutes.">

    <link rel="icon" type="image/svg+xml" href="{{ url_for('static', filename='favicon.svg') }}">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="{{ url_for('static', filename='landing-style.css') }}">

    <!-- Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-WVTWQBBG8S"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'G-WVTWQBBG8S');
    </script>

    <!-- JSON-LD Structured Data -->
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "WebSite",
        "name": "IL9Cast",
        "url": "https://il9.org",
        "description": "Live prediction market aggregation for Illinois 9th District Democratic Primary election on March 17, 2026",
        "potentialAction": {
            "@type": "SearchAction",
            "target": "https://il9.org/?q={search_term_string}",
            "query-input": "required name=search_term_string"
        }
    }
    </script>
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "Event",
        "name": "Illinois 9th District Democratic Primary Election",
        "startDate": "2026-03-17T19:00:00-06:00",
        "endDate": "2026-03-17T20:00:00-06:00",
        "eventStatus": "https://schema.org/EventScheduled",
        "eventAttendanceMode": "https://schema.org/OfflineEventAttendanceMode",
        "location": {
            "@type": "Place",
            "name": "Illinois 9th Congressional District",
            "address": {
                "@type": "PostalAddress",
                "addressRegion": "IL",
                "addressCountry": "US"
            }
        },
        "description": "Democratic Primary election for Illinois 9th Congressional District"
    }
    </script>
</head>
<body class="dark-mode">


    <div class="site-content">
        <header>
            <a href="/" class="logo">IL9<span>Cast</span></a>
            <button class="hamburger" id="hamburger" onclick="toggleMobileMenu()">
                <span></span>
                <span></span>
                <span></span>
            </button>
            <nav class="mobile-nav" id="mobileNav">
                <a href="/" class="active">Home</a>
                <a href="/markets">Markets</a>
                <a href="/candidates">Candidates</a>
                <a href="/fundraising">Fundraising</a>
                <a href="/methodology">Methodology</a>
                <a href="/about">About</a>
                <a href="https://github.com/de-bayes/IL9" target="_blank" rel="noopener noreferrer" class="github-link">GitHub</a>
                <a href="https://buy.stripe.com/4gMdR98o72FP77e7jX1sQ00" target="_blank" rel="noopener noreferrer" class="donate-link">Donate</a>
            </nav>
        </header>

        <section class="hero" id="home">
            <h1>Illinois 9th District Democratic Primary</h1>
            <p class="subtitle">Live prediction market aggregation for the March 17, 2026 primary election</p>
            <p class="countdown-compact"><span id="countdownCompact">--</span> until polls close • March 17, 2026 at 7:00 PM CT</p>
        </section>

        <section class="features-section">
            <div class="features-callout">
                <h2 class="features-title">Why IL9Cast?</h2>
                <div class="features-grid">
                    <div class="feature-item">
                        <h3>Real-Time Aggregation</h3>
                        <p>Combines data from Manifold Markets and Kalshi every 60 seconds</p>
                    </div>
                    <div class="feature-item">
                        <h3>Weighted Formula</h3>
                        <p>40% Manifold + 60% Kalshi (last/mid/liquidity) for balanced odds</p>
                    </div>
                    <div class="feature-item">
                        <h3>Historical Tracking</h3>
                        <p><span id="snapshotCount">5,000+</span> snapshots (<span id="dataPointCount">30,000+</span> data points)</p>
                    </div>
                    <div class="feature-item">
                        <h3>Downloadable Data</h3>
                        <p>Export complete historical dataset in JSONL format</p>
                    </div>
                </div>
            </div>
        </section>

        <section class="featured-forecasts">
            <h2 class="section-title">Current Race Status</h2>

            <div class="forecast-grid">
                <a href="/markets" class="forecast-card">
                    <div class="forecast-header">
                        <h3>Live Prediction Markets</h3>
                        <span class="forecast-type">Aggregated Odds</span>
                    </div>
                    <div class="forecast-meta">
                        <span>Real-time data from Manifold & Kalshi</span>
                        <span>Updates every 60 seconds</span>
                    </div>
                </a>

                <a href="/odds" class="forecast-card">
                    <div class="forecast-header">
                        <h3>Forecasting Model</h3>
                        <span class="forecast-type">Statistical Analysis</span>
                    </div>
                    <div class="forecast-meta">
                        <span>Polling data unavailable</span>
                        <span>In development</span>
                    </div>
                </a>

                <a href="/fundraising" class="forecast-card">
                    <div class="forecast-header">
                        <h3>Fundraising</h3>
                        <span class="forecast-type">Campaign Finance</span>
                    </div>
                    <div class="forecast-meta">
                        <span>FEC filing data</span>
                        <span>Available Jan 31st</span>
                    </div>
                </a>
            </div>

            <div style="text-align: center; margin-top: 1.5rem;">
                <a href="/markets" class="btn">View Live Markets</a>
            </div>
        </section>

        <footer class="site-footer">
            <div class="footer-content">
                <div class="footer-section">
                    <h4>About</h4>
                    <ul>
                        <li><a href="/about">About IL9Cast</a></li>
                        <li><a href="/methodology">Methodology</a></li>
                        <li><a href="https://github.com/de-bayes/IL9" target="_blank" rel="noopener noreferrer">GitHub</a></li>
                    </ul>
                </div>
                <div class="footer-section">
                    <h4>Data</h4>
                    <ul>
                        <li><a href="/markets">Live Markets</a></li>
                        <li><a href="/markets">Download Data</a></li>
                        <li>Updated every 3 minutes</li>
                    </ul>
                </div>
                <div class="footer-section">
                    <h4>Disclaimer</h4>
                    <p>Prediction markets involve risk. Past performance does not guarantee future results. This platform aggregates public market data for informational purposes.</p>
                </div>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2026 IL9Cast. Built with open data. • Railway & AWS Storage: Live • <a href="https://buy.stripe.com/4gMdR98o72FP77e7jX1sQ00" target="_blank" rel="noopener noreferrer" class="footer-support-link">Support This Project</a></p>
            </div>
        </footer>
        <div class="flag-footer-image">
            <img src="{{ url_for('static', filename='flag-footer.png') }}" alt="Illinois Flag Footer">
        </div>
    </div>

    <script>
        // Mobile hamburger menu toggle
        function toggleMobileMenu() {
            const hamburger = document.getElementById('hamburger');
            const mobileNav = document.getElementById('mobileNav');
            hamburger.classList.toggle('active');
            mobileNav.classList.toggle('active');
        }

        // Close mobile menu when a link is clicked
        document.querySelectorAll('#mobileNav a').forEach(link => {
            link.addEventListener('click', () => {
                document.getElementById('hamburger').classList.remove('active');
                document.getElementById('mobileNav').classList.remove('active');
            });
        });

        // Close mobile menu when clicking outside
        document.addEventListener('click', (e) => {
            const hamburger = document.getElementById('hamburger');
            const mobileNav = document.getElementById('mobileNav');
            if (!hamburger.contains(e.target) && !mobileNav.contains(e.target)) {
                hamburger.classList.remove('active');
                mobileNav.classList.remove('active');
            }
        });

        // Counter animation for snapshot count and data points
        async function animateCounter() {
            const snapshotElement = document.getElementById('snapshotCount');
            const dataPointElement = document.getElementById('dataPointCount');
            if (!snapshotElement || !dataPointElement) return;

            let snapshotCount = 5000; // Fallback if API fails
            let dataPointsCount = 30000; // Fallback if API fails

            try {
                const resp = await fetch('/api/snapshots/count');
                const data = await resp.json();
                snapshotCount = data.snapshots || data.count || 5000;
                dataPointsCount = data.data_points || 30000;
            } catch (e) {
                console.error('Failed to fetch snapshot count:', e);
            }

            const duration = 1500;
            const startTime = Date.now();

            function update() {
                const elapsed = Date.now() - startTime;
                const progress = Math.min(elapsed / duration, 1);

                // Animate snapshot count
                const currentSnapshots = Math.floor(progress * snapshotCount);
                snapshotElement.textContent = currentSnapshots.toLocaleString() + '+';

                // Animate data points count
                const currentDataPoints = Math.floor(progress * dataPointsCount);
                dataPointElement.textContent = currentDataPoints.toLocaleString() + '+';

                if (progress < 1) {
                    requestAnimationFrame(update);
                } else {
                    snapshotElement.textContent = snapshotCount.toLocaleString() + '+';
                    dataPointElement.textContent = dataPointsCount.toLocaleString() + '+';
                }
            }

            update();
        }

        // Run counter animation when page loads
        window.addEventListener('load', animateCounter);

        // Compact Countdown Timer to Election Day
        function updateCountdown() {
            const electionDate = new Date('2026-03-18T01:00:00Z'); // March 17 7PM CT = March 18 1AM UTC
            const now = new Date();
            const timeDiff = electionDate - now;

            const countdownEl = document.getElementById('countdownCompact');
            if (!countdownEl) return;

            if (timeDiff <= 0) {
                countdownEl.textContent = 'Polls closed';
                return;
            }

            const days = Math.floor(timeDiff / (1000 * 60 * 60 * 24));
            const hours = Math.floor((timeDiff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
            const minutes = Math.floor((timeDiff % (1000 * 60 * 60)) / (1000 * 60));

            if (days > 0) {
                countdownEl.textContent = `${days}d ${hours}h`;
            } else if (hours > 0) {
                countdownEl.textContent = `${hours}h ${minutes}m`;
            } else {
                const seconds = Math.floor((timeDiff % (1000 * 60)) / 1000);
                countdownEl.textContent = `${minutes}m ${seconds}s`;
            }
        }

        // Update countdown every second
        updateCountdown();
        setInterval(updateCountdown, 1000);

        // Snapshot counter: 4,000 (pre-reset data) + live JSONL count
    </script>

    <footer class="site-footer">
        <img src="{{ url_for('static', filename='flag-footer.svg') }}" alt="Decorative flag footer">
    </footer>
</body>
</html>
